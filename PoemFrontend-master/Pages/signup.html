<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Headers · Bootstrap v5.0</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/headers/">

    

    <!-- Bootstrap core CSS -->



<!-- Custom styles for this template -->

</head>
<body class="bg-warning">

<main class="row">
    <div id="alert" class="alert alert-success sticky-top m-5 alert-dismissible fade hide" role="alert">

    </div>

    <div class="col-xl-3 col-lg-3 col-md-2 col-sm-2 col-xs-2"></div>
    <div class="col-xl-6 col-lg-6 col-md-8 col-sm-8 col-xs-8">
        <p class="text-secondary h1 py-2 px-1 text-center " style="font-weight:900; font-family: chalkduster;">Free<span class="text-black">Form</span></p>
        <p class="text-small mb-3 fw-normal text-bold text-center">Account Creation</p>
        <form class="form form-group" id="signup_form" onsubmit="get_form_data()">
                <div class="row p-3">
                    <div class="col-sm-6 p-2">
                        First Name
                        <input class="form-control form_atr" required type="text" name="first_name" placeholder="Enter First Name"/>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                    <div class="col-sm-6 p-2">
                        Last Name
                        <input class="form-control form_atr" required type="text" name="last_name" placeholder="Enter Last Name"/>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-sm-6 p-2">
                        Username
                        <input class="form-control form_atr" required type="text" name="username" placeholder="Enter Username"/>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                    <div class="col-sm-6 p-2">
                        Email Address
                        <input class="form-control form_atr" required type="email" name="email" placeholder="Enter Email Address"/>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-sm-12 p-2">
                        Gender
                            <select class="form-select form_atr" name="gender">
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                    </div>
                </div>
                <div class="row p-3">
                    Biography
                    <div class="col-sm-12 p-2">
                        <textarea class="form-control form_atr" name="bio" placeholder="Write about yourself">I love poetry!</textarea>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                </div>
            <div class="row p-3">
                    Password
                    <div class="col-sm-12 p-2">
                        <input class="form-control form_atr" required id="pass1" type="password" name="password" placeholder="Enter Password"></input>
                        <small class="text-danger d-none">wrong</small>
                    </div>
                </div>
            <div class="row p-3">
                    Password
                    <div class="col-sm-12 p-2">
                        <input class="form-control" required id="pass2" type="password" name="pass1" placeholder="Re-Enter Password"></input>
                    </div>
                </div>

                <div class="row p-3">
                    <div class="col-sm-12 p-2">
                        <input type="checkbox" id="conditions"> I agree to the <span><a href="">terms and conditions</a></span></input>
                     </div>
                </div>
                <div class="row p-3">
                    <div class="col-sm-12 p-2">
                        <button class="w-100 btn btn-lg btn-dark" id="form_submit" type="button">Signup</button>
                        <a class="text-black mt-2 h6 text-decoration-none text-center d-block" href="../Pages/login.html">I already have an account</a>
                        <p class="mt-5 mb-3 text-muted text-center">&copy; 2017–2021</p>

                     </div>
                </div>
    

        </form>
    </div>
    <div class="col-xl-3 col-lg-3 col-md-2 col-sm-2 col-xs-2"></div>
</main>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script src="../scripts/utility.js" type="application/javascript"></script>
<script type="application/javascript">
    const alert_bar = document.getElementById('alert')
    const form_btn = document.getElementById('form_submit')
    const form_data = document.getElementsByClassName('form_atr')
    let app_state = {
    "user": {},
    "language": "English",
    "highlighted_word": window.getSelection().toString(),
    "highlighted_text": null,
    "select_start": null,
    "select_end": null,
    "lines": [],
    "poem_title": null,
    "alert": {},
    "page": "signup"

}

    form_btn.onclick = () =>{
        let data = get_form_data()
        const pass1 = document.getElementById('pass1')
        const pass2 = document.getElementById('pass2')
        const conditions = document.getElementById('conditions')
        console.log(conditions, conditions.checked)
        if (pass1.value !== pass2.value){
            alert('The passwords are not the same')
            return;
        }
        if (pass1.value.length < 8){
            alert('The password length must be above 8')
            return;
        }

        if (!conditions.checked){
            alert('You cannot proceed until you agree to the terms and conditions')
            return;
        }

        submit_form(data)

    }


    const show_alert = (message, type) =>{
        const alert_type = {"success": "alert-success", "failed": "alert-danger"}
        alert_bar.innerText = message
        alert_bar.classList.remove('alert-success')
        alert_bar.classList.remove('alert-danger')
        alert_bar.classList.add(alert_type[type])
        alert_bar.classList.add('show')
    }


    const signup_success = (result) =>{
        app_state.alert = {"message": result.message, "type": "success"}
        app_state.page = 'login'
        update_local_storage()
        window.location.replace("login.html");
    }

    const submit_form = (data) =>{
        $.ajax(
            {url: `${base_url}/accounts/auth/signup/`,
            cache: false,
            success: (result,status, request)=>{signup_success(result)},
            data: data,
            error: (request,status,error) =>{handle_form_error(request)},
            type: "POST",
            dataType: "json"
            })
        }

</script>
      
  </body>
</html>
